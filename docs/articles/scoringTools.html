<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Scoring Tools: the scoringTools package • scoringTools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Credit Scoring Tools: the scoringTools package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scoringTools</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/scoringTools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Credit Scoring Tools: the scoringTools package</h1>
                        <h4 class="author">Adrien Ehrhardt</h4>
            
            <h4 class="date">2019-06-27</h4>
      
      
      <div class="hidden name"><code>scoringTools.Rmd</code></div>

    </div>

    
    
<div id="what-is-credit-scoring" class="section level1">
<h1 class="hasAnchor">
<a href="#what-is-credit-scoring" class="anchor"></a>What is Credit Scoring?</h1>
<p>This package has been developed as part of a CIFRE PhD, a special PhD contract in France which is for the most part financed by a company. This company subsequently gets to choose which subject(s) are tackled.</p>
<p>This research has been financed by Crédit Agricole Consumer Finance (CA CF), subsidiary of the Crédit Agricole Group which provides all kinds of banking and insurance services. CA CF focuses on consumer loans, ranging from luxury cars to small electronics.</p>
<p>In order to accept / reject loan applications more efficiently (both quicker and to select better applicants), most financial institutions resort to Credit Scoring: given the applicant’s characteristics he/she is given a Credit Score, which has been statistically designed using previously accepted applicants, and which partly decides whether the financial institution will grant the loan or not.</p>
<div id="context" class="section level2">
<h2 class="hasAnchor">
<a href="#context" class="anchor"></a>Context</h2>
<p>In practice, the statistical modeler has historical data about each customer’s characteristics. For obvious reasons, only data available at the time of inquiry must be used to build a future application scorecard. Those data often take the form of a well-structured table with one line per client alongside their performance (did they pay back their loan or not?) as can be seen in the following table:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Job</th>
<th align="left">Habitation</th>
<th align="right">Time_in_job</th>
<th align="right">Children</th>
<th align="left">Family_status</th>
<th align="left">Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Craftsman</td>
<td align="left">Owner</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="left">Divorced</td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">Technician</td>
<td align="left">Renter</td>
<td align="right">20</td>
<td align="right">1</td>
<td align="left">Widower</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">Executive</td>
<td align="left">Starter</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="left">Single</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">Office employee</td>
<td align="left">By family</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">Married</td>
<td align="left">No</td>
</tr>
</tbody>
</table>
</div>
<div id="formulation" class="section level2">
<h2 class="hasAnchor">
<a href="#formulation" class="anchor"></a>Formulation</h2>
<p>The variable to predict, here denoted by , is an active research field and we will not discuss it here. We suppose we already have a binary random variable <span class="math inline">\(Y\)</span> from which we have <span class="math inline">\(n\)</span> observations <span class="math inline">\(\mathbf{y} = (y_i)_1^n\)</span>.</p>
<p>The <span class="math inline">\(d\)</span> predictive features, here for example the job, habitation situation, etc., are usually socio-demographic features asked by the financial institutions at the time of application. They are denoted by the random vector <span class="math inline">\(\boldsymbol{X} = (X_j)_1^d\)</span> and as for <span class="math inline">\(Y\)</span> we have <span class="math inline">\(n\)</span> observations <span class="math inline">\(\mathbf{x}=(x_i)_1^n\)</span>.</p>
<p>We suppose that observations <span class="math inline">\((\mathbf{x},\mathbf{y})\)</span> come from an unknown distribution <span class="math inline">\(p(x,y)\)</span> which is not directly of interest. Our interest lies in the conditional probability of a client with characteristics <span class="math inline">\(\boldsymbol{x}\)</span> of paying back his loan, i.e. <span class="math inline">\(p(y|\boldsymbol{x})\)</span>, also unknown.</p>
<p>In the context of Credit Scoring, we historically stick to logistic regression, for various reasons out of the scope of this vignette. The logistic regression model assumes the following relation between <span class="math inline">\(\boldsymbol{X}\)</span> (supposed continuous here) and <span class="math inline">\(Y\)</span>: <span class="math display">\[\ln \left( \frac{p_{\boldsymbol{\theta}}(Y=1|\boldsymbol{x})}{p_{\boldsymbol{\theta}}(Y=0|\boldsymbol{x})} \right) = (1, \boldsymbol{x})'{\boldsymbol{\theta}}\]</span></p>
<p>We would like to have the ‘‘best’’ model compared to the true <span class="math inline">\(p(y|\boldsymbol{x})\)</span> from which we only have samples. Had we access to the true underlying model, we would like to minimize, w.r.t. <span class="math inline">\({\boldsymbol{\theta}}\)</span>, <span class="math inline">\(H_{\boldsymbol{\theta}} = \mathbb(E)_{(X,Y) \sim p}[\ln(p_{\boldsymbol{\theta}}(Y|\boldsymbol{X}))]\)</span>. Since this is not possible, we approximate this criterion by maximizing, w.r.t. <span class="math inline">\(\theta\)</span>, the likelihood <span class="math inline">\(\ell({\boldsymbol{\theta}};\mathbf{x},\mathbf{y}) = \sum_{i=1}^n \ln(p_{\boldsymbol{\theta}}(y_i|\boldsymbol{x}_i))\)</span>.</p>
<p>In R, this is done by fitting a  model to the data:</p>
<p>We can now focus on the regression coefficients <span class="math inline">\(\theta\)</span>:</p>
<p>and the log-likelihood value at this estimation of <span class="math inline">\(\theta\)</span>:</p>
<p>From this, it seems that Credit Scoring is pretty straightforward when the data is at hand.</p>
</div>
<div id="conceptual-problems-of-current-approaches-to-credit-scoring" class="section level2">
<h2 class="hasAnchor">
<a href="#conceptual-problems-of-current-approaches-to-credit-scoring" class="anchor"></a>Conceptual problems of current approaches to Credit Scoring</h2>
<p>Nevertheless, there are a few theoretical limitations of the current approach, e.g.:</p>
<ul>
<li>We don’t observe rejected applicants’s performance, i.e. we don’t have observations <span class="math inline">\(y_i\)</span> for previously rejected applicants;</li>
<li>The performance variable <span class="math inline">\(Y\)</span> must be constructed using historical data but we can’t wait for all current contracts to end, that’s why financial institutions usually consider a defaulting client to be someone failing to pay two consecutive installments;</li>
<li>Credit risk modelers often ‘‘discretize’’ the input data <span class="math inline">\(\boldsymbol{X}\)</span>, that is to say continuous variables are transformed into categorical variables corresponding to intervals of the support of <span class="math inline">\(\boldsymbol{X}\)</span> and categorical variables might see their values regrouped to form a categorical variable with less values (but whose coefficients are ‘‘easier’’ to estimate). Up to now, there was no theoretical grounds to do so and no uniformly better method;</li>
<li>Credit risk modelers have always sticked to logistic regression without knowing whether it is somewhat ‘‘close’’ to the true underlying model.</li>
</ul>
</div>
<div id="problems-tackled-in-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#problems-tackled-in-this-package" class="anchor"></a>Problems tackled in this package</h2>
<p>At the time of this writing, four problems have been tackled so far in the Credit Scoring framework:</p>
<ol style="list-style-type: decimal">
<li>Reject Inference,</li>
<li>‘‘Quantization’’ of continuous (discretization) and qualitative (grouping) features,</li>
<li>Interactions among covariates,</li>
<li>‘‘Segmentation’’ of clients into subpopulations with different scorecards: logistic regression trees.</li>
</ol>
<p>Findings from these two subjects have been formalized in two preprints articles, and respectively.</p>
<p>This package is about these two subjects on which we’ll go deeper in the next two sections.</p>
</div>
</div>
<div id="reject-inference" class="section level1">
<h1 class="hasAnchor">
<a href="#reject-inference" class="anchor"></a>Reject Inference</h1>
<div id="context-1" class="section level2">
<h2 class="hasAnchor">
<a href="#context-1" class="anchor"></a>Context</h2>
<div id="current-acceptance-system" class="section level3">
<h3 class="hasAnchor">
<a href="#current-acceptance-system" class="anchor"></a>Current acceptance system</h3>
<p>From all applicants who get a Credit Score, there are three interesting sub-populations: the financed clients, who were granted a loan, the rejected applicants, who were rejected either by business rules (e.g. over-indebtedness) or because of a low Credit Score, and the not-taking up applicants who were offered a loan but decided not to take it (e.g. they don’t need it anymore or they went to a competitor).</p>
<p>Obviously, the performance variable <span class="math inline">\(Y\)</span> is observed only for financed clients so that we have <span class="math inline">\(n\)</span> observations of financed clients <span class="math inline">\((\boldsymbol{x}_i,y_i)_1^n\)</span> and <span class="math inline">\(n'\)</span> observations of not financed clients for who we only have the characteristics <span class="math inline">\((\boldsymbol{x}_i)_1^{n'}\)</span>.</p>
</div>
<div id="mathematical-formulation" class="section level3">
<h3 class="hasAnchor">
<a href="#mathematical-formulation" class="anchor"></a>Mathematical formulation</h3>
<p>Strictly speaking, we have observations from <span class="math inline">\(p(\boldsymbol{x},y,Z=f)\)</span> and by fitting a logistic regression to this data, we subsequently estimate <span class="math inline">\(p(y|\boldsymbol{x},Z=f)\)</span> which is quite ‘‘different’’ from <span class="math inline">\(p(y|\boldsymbol{x})\)</span>. Since the Credit Score is to be applied to the whole population to decide whether to accept/reject clients, it seems that this can lead to a biased model, even asymptotically.</p>
<p>There are three important keys to understand if the resulting model is biased:</p>
<ul>
<li>Is the model local or global, i.e. does it compute <span class="math inline">\(p(y|\boldsymbol{x})\)</span> directly or does it have to model <span class="math inline">\(p(\boldsymbol{x},y)\)</span> and then deduce <span class="math inline">\(p(y|\boldsymbol{x})\)</span> in which case it is necessarily biased?</li>
<li>Is the model ‘‘true’’, i.e. is there any <span class="math inline">\(\boldsymbol{\theta}\)</span> such that <span class="math inline">\(p(y|\boldsymbol{x}) = p_{\boldsymbol{\theta}}(y|\boldsymbol{x})\)</span>?</li>
<li>What is the missingness mechanism? Following Rubin’s definition it can be MCAR (missingness of <span class="math inline">\(y\)</span> is indepedent of any variable), MAR (missingness of <span class="math inline">\(y\)</span> only depends on <span class="math inline">\(\boldsymbol{x}\)</span>) or MNAR (there are unobserved variables that determine <span class="math inline">\(y\)</span>’s missingness).</li>
</ul>
</div>
</div>
<div id="theoretical-findings" class="section level2">
<h2 class="hasAnchor">
<a href="#theoretical-findings" class="anchor"></a>Theoretical findings</h2>
<p>Our theoretical findings on this subject is extensively discussed in .</p>
<p>In short, using only financed clients’ characteristics to learn a logistic regression model is asymptotically correct when the missingness mechanism is MAR and the model is true. We can easily show this by simulating data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># plot(augmentation_model)</span></a></code></pre></div>
<p>When the missingness mechanism is MNAR, <span class="math inline">\(p(y|\boldsymbol{x},f) \neq p(y|\boldsymbol{x},nf)\)</span> so that there is no way to ‘‘unbias’’ the resulting model without introducing data from the financing mechanism and model <span class="math inline">\(p(f|\boldsymbol{x},y)\)</span>.</p>
<p>When the model is false, we could make use of not financed clients to estimate <span class="math inline">\(p(f|\boldsymbol{x})\)</span> and consider this as an importance function in the Importance Sampling framework. However, this gives good results when the importance function is known and under probabilistic assumptions not met in our use case. Here it must be evaluated separately and simulations show that this estimation process also introduces bias and variance and subsequently does not improve upon the financed clients’ model.</p>
</div>
<div id="reject-inference-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#reject-inference-methods" class="anchor"></a>Reject Inference methods</h2>
<p>To deal with the possible bias of fitting a logistic regression to the financed clients’ data, Reject Inference methods have been proposed in the literature. We showed in that none of them could potentially give any good result. Nevertheless, we implemented them to compare them numerically.</p>
<div id="functions" class="section level3">
<h3 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h3>
<p>In this package, we implemented Reject Inference methods which were described for example in and were supposed to enable credit risk modelers to use not-financed clients’ characteristics in the logistic regression learning process. We demonstrated that these methods are not statistically grounded. We nevertheless implemented these methods to show these results numerically.</p>
<p>The first method is Fuzzy Augmentation as described in the Appendix of .</p>
<p>The second method is Reclassification as described in the Appendix of .</p>
<p>The third method is Augmentation as described in the Appendix of .</p>
<p>The fourth method is Parcelling as described in the Appendix of .</p>
<p>The fifth method is Twins as described in the Appendix of .</p>
<p>Each of these functions output an S4 object named ‘‘reject_infered’’. This object has slots:</p>
<ul>
<li>method: the Reject Inference method used;</li>
<li>financed_model: the logistic regression using only financed clients’ characteristics;</li>
<li>acceptance_model: the logistic regression modeling the financing decision (empty for all methods except Augmentation and Twins);</li>
<li>infered_model: the logistic regression obtained using a given reject inference technique.</li>
</ul>
</div>
<div id="methods" class="section level3">
<h3 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h3>
<p>To efficiently use the generated S4 objects of class ‘‘reject_infered’’ several methods were implemented which we detail here.</p>
<div id="print-method" class="section level4">
<h4 class="hasAnchor">
<a href="#print-method" class="anchor"></a>print method</h4>
<p>The print method shows the method used and the coefficients of infered_model, much like you would get from printing a  object:</p>
</div>
<div id="summary-method" class="section level4">
<h4 class="hasAnchor">
<a href="#summary-method" class="anchor"></a>summary method</h4>
<p>The summary method shows the method used alongside the coefficients of the financed model, eventually the acceptance model and the infered model with AIC values, much like you would get from doing a summary on a  object:</p>
</div>
<div id="predict-method" class="section level4">
<h4 class="hasAnchor">
<a href="#predict-method" class="anchor"></a>predict method</h4>
<p>The predict method corresponds to the glm predict method for the infered model:</p>
</div>
<div id="plot-method" class="section level4">
<h4 class="hasAnchor">
<a href="#plot-method" class="anchor"></a>plot method</h4>
<p>The plot method allows the modeler to compare each coefficient’s values in the financed model and the infered model.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># plot(augmentation_model)</span></a></code></pre></div>
</div>
</div>
</div>
</div>
<div id="quantization" class="section level1">
<h1 class="hasAnchor">
<a href="#quantization" class="anchor"></a>Quantization</h1>
<div id="context-2" class="section level2">
<h2 class="hasAnchor">
<a href="#context-2" class="anchor"></a>Context</h2>
<p>Under the term ‘‘quantization’’, we refer to the process of transforming a continuous feature into a categorical feature which values uniquely correspond to intervals of the continuous feature and to the process of regrouping values of categorical feature.</p>
<p>There are a few advantages to discretizing the input features:</p>
<ul>
<li>Interpretability: the logistic regression becomes a simple addition;</li>
<li>Usability in other areas: we can address subgroups by focusing on one or several values of a given discretized feature;</li>
<li>Outliers have less influence in model fitting because they are regrouped in the first (or last) value of the discretized feature;</li>
<li>Non-linearity of the continuous value w.r.t. the log odd ratio: the real log odd ratio of each feature (all else equal) is considered linear in the logistic regression equation which might not be true. By discretizing each feature, we perform stepwise approximation.</li>
</ul>
<p>There are a few drawbacks as well:</p>
<ul>
<li>Pre-processing task that can be costly in both human and computation time;</li>
<li>Loss in predictive power if continuous model is closer to the true model;</li>
<li>Harder to estimate each coefficient as there are more coefficients and subsequently less data to estimate each of them.</li>
</ul>
<p>These advantages and drawbacks are explained in-depth in .</p>
<p>Despite its limitations, CA CF decided to go on developping their scorecards by using logistic regression and discretizing their input features. However, with the growing number of input features in an era of Big Data, the increasing number of products and types of clients addressed and the simultaneous aging of their previous scorecards, they decided to have an automatic tool to generate production-ready scorecards by automizing the discretization process under constraints (which we’ll develop later on) and the logistic regression fitting. They had to be confident on the underlying mechanisms of this tool (mathematically speaking) that is why it became a research project. We first delve into the mathematics of the problem.</p>
</div>
<div id="mathematical-reinterpretation" class="section level2">
<h2 class="hasAnchor">
<a href="#mathematical-reinterpretation" class="anchor"></a>Mathematical reinterpretation</h2>
<div id="model" class="section level3">
<h3 class="hasAnchor">
<a href="#model" class="anchor"></a>Model</h3>
<p>We consider a random vector <span class="math inline">\(\boldsymbol{X}=(X_1,X_d)\)</span> where <span class="math inline">\(X_j\)</span> can be either continuous or qualitative (with <span class="math inline">\(o_j\)</span> distinct values). We denote by <span class="math inline">\(\boldsymbol{\mathfrak{q}}=(\mathfrak{q}_1,\mathfrak{q}_d)\)</span> the quantized random vector where <span class="math inline">\(\mathfrak{q}_j\)</span> is the quantization of <span class="math inline">\(X_j\)</span>, i.e. qualitative with <span class="math inline">\(m_j\)</span> values corresponding either to unique intervals of <span class="math inline">\(X_j\)</span> (continuous case) or to unique regroupments of <span class="math inline">\(X_j\)</span>’s <span class="math inline">\(o_j\)</span> values (which implies <span class="math inline">\(m_j \leq o_j\)</span>).</p>
<p>We suppose that by quantizing features <span class="math inline">\(\boldsymbol{X}\)</span>, we preserve all information about the target feature, i.e. <span class="math inline">\(p(y|\boldsymbol{x},\boldsymbol{\mathfrak{q}}) = p(y|\boldsymbol{\mathfrak{q}})\)</span>.</p>
</div>
<div id="hard-optimization-problem" class="section level3">
<h3 class="hasAnchor">
<a href="#hard-optimization-problem" class="anchor"></a>Hard optimization problem</h3>
<p>Although this process seems straightforward, it is a rather complicated optimization problem in terms of</p>
</div>
<div id="choosing-the-right-model-which-criterion" class="section level3">
<h3 class="hasAnchor">
<a href="#choosing-the-right-model-which-criterion" class="anchor"></a>Choosing the ‘‘right’’ model: which criterion?</h3>
<p>The task is to find the optimal logistic regression <span class="math inline">\(p_{\boldsymbol{\theta}}(y|\boldsymbol{\mathfrak{q}})\)</span> where <span class="math inline">\(\boldsymbol{\mathfrak{q}}\)</span> is unknown and must be chosen in a set <span class="math inline">\(\mathbf{\mathfrak{Q}}_{\boldsymbol{m}}\)</span> very large as said in the previous section. So the model selection problem can be expressed in terms of classical criteria, e.g. AIC, BIC, where and <span class="math inline">\(\mathbf{\mathfrak{Q}}_{\boldsymbol{m}}\)</span> have to be scanned:</p>
<p><span class="math display">\[ (\hat{\boldsymbol{\theta}}, \hat{\boldsymbol{\mathfrak{q}}}) = \arg \max_{(\boldsymbol{\theta},\boldsymbol{\mathfrak{q}})} AIC(p_{\boldsymbol{\theta}}(\mathbf{y}|\mathbf{\mathfrak{q}})).\]</span></p>
</div>
<div id="the-need-for-generating-clever-candidates" class="section level3">
<h3 class="hasAnchor">
<a href="#the-need-for-generating-clever-candidates" class="anchor"></a>The need for generating ‘‘clever’’ candidates</h3>
<p>The criterion developed in the previous part cannot be optimized directly because the set <span class="math inline">\(\mathbf{\mathfrak{Q}}_{\boldsymbol{m}}\)</span> of candidate discretizations is too large. The idea behind most existing supervised discretization method is to generate potentially ‘‘good’’ candidates (although most methods don’t depend on the predictive algorithm to be applied after discretization).</p>
<p>By doing so, we reduce elements of <span class="math inline">\(\mathbf{\mathfrak{Q}}_{\boldsymbol{m}}\)</span> to the generated candidates which is a considerably smaller set, with most existing methods outputing only one discretization scheme. We go through a few of them in the next section.</p>
</div>
</div>
<div id="existing-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#existing-methods" class="anchor"></a>Existing methods</h2>
<div id="the-discretization-package" class="section level3">
<h3 class="hasAnchor">
<a href="#the-discretization-package" class="anchor"></a>The discretization package</h3>
</div>
<div id="chi-2-based-methods" class="section level3">
<h3 class="hasAnchor">
<a href="#chi-2-based-methods" class="anchor"></a>Chi-2 based methods</h3>
</div>
<div id="entropy-based-methods" class="section level3">
<h3 class="hasAnchor">
<a href="#entropy-based-methods" class="anchor"></a>Entropy based methods</h3>
</div>
</div>
<div id="added-constraints" class="section level2">
<h2 class="hasAnchor">
<a href="#added-constraints" class="anchor"></a>Added constraints</h2>
<div id="few-values" class="section level3">
<h3 class="hasAnchor">
<a href="#few-values" class="anchor"></a>Few values</h3>
</div>
<div id="interpretability-of-the-intervals" class="section level3">
<h3 class="hasAnchor">
<a href="#interpretability-of-the-intervals" class="anchor"></a>Interpretability of the intervals</h3>
</div>
<div id="feature-selection" class="section level3">
<h3 class="hasAnchor">
<a href="#feature-selection" class="anchor"></a>Feature selection</h3>
</div>
<div id="automatic-creation-of-interaction-terms" class="section level3">
<h3 class="hasAnchor">
<a href="#automatic-creation-of-interaction-terms" class="anchor"></a>Automatic creation of interaction terms</h3>
</div>
</div>
<div id="proposed-method" class="section level2">
<h2 class="hasAnchor">
<a href="#proposed-method" class="anchor"></a>Proposed method</h2>
<div id="general-idea" class="section level3">
<h3 class="hasAnchor">
<a href="#general-idea" class="anchor"></a>General idea</h3>
<p>We proposed a discretization algorithm that meets these criteria and naturally . It was described in .</p>
<p>In short, the algorithm considers the discretized features <span class="math inline">\(E\)</span> as latent variables which we will generate from its estimated a posteriori density function as part of an SEM-algorithm (see ). The algorithm alternates between:</p>
<ol style="list-style-type: decimal">
<li>Fitting a logistic regression between <span class="math inline">\(\boldsymbol{\mathfrak{q}}\)</span> and <span class="math inline">\(y\)</span>;</li>
<li>Fitting polytomous logistic regression functions between each pair of <span class="math inline">\((x_j,\mathfrak{q}_j)\)</span>;</li>
<li>Generate new discretized features <span class="math inline">\(E\)</span> by sampling them, as <span class="math inline">\(p(\mathfrak{q}_j|\mathfrak{q}_{-\{j\}},\boldsymbol{x},y) \propto p(\mathfrak{q}_j|x_j) p(y|\boldsymbol{\mathfrak{q}})\)</span>.</li>
</ol>
</div>
<div id="implementation" class="section level3">
<h3 class="hasAnchor">
<a href="#implementation" class="anchor"></a>Implementation</h3>
<div id="the-glmdisc-function" class="section level4">
<h4 class="hasAnchor">
<a href="#the-glmdisc-function" class="anchor"></a>The glmdisc function</h4>
</div>
<div id="methods-associated-with-it" class="section level4">
<h4 class="hasAnchor">
<a href="#methods-associated-with-it" class="anchor"></a>Methods associated with it</h4>
<div id="discretize-method" class="section level5">
<h5 class="hasAnchor">
<a href="#discretize-method" class="anchor"></a>discretize method</h5>
<p>The discretize method discretizes a given dataset using a previously trained discretization scheme. Its output is also a ‘‘discretization’’ object.</p>
</div>
<div id="print-method-1" class="section level5">
<h5 class="hasAnchor">
<a href="#print-method-1" class="anchor"></a>print method</h5>
<p>The print method</p>
</div>
<div id="summary-method-1" class="section level5">
<h5 class="hasAnchor">
<a href="#summary-method-1" class="anchor"></a>summary method</h5>
<p>The summary method</p>
</div>
<div id="predict-method-1" class="section level5">
<h5 class="hasAnchor">
<a href="#predict-method-1" class="anchor"></a>predict method</h5>
<p>The predict method</p>
</div>
<div id="plot-method-1" class="section level5">
<h5 class="hasAnchor">
<a href="#plot-method-1" class="anchor"></a>plot method</h5>
<p>The plot method is associated with ‘‘types’’:</p>
<ul>
<li>‘‘default’’: same method as plotting the resulting best  method;</li>
<li>‘‘discretization’’: plots each feature’s discretization scheme;</li>
<li>‘‘all’’: produces all plots on the same frame.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="figures" class="section level2">
<h2 class="hasAnchor">
<a href="#figures" class="anchor"></a>Figures</h2>
<p>The figure sizes have been customised so that you can easily put two images side-by-side.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">plot</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">plot</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<p><img src="scoringTools_files/figure-html/unnamed-chunk-22-1.png" width="700"><img src="scoringTools_files/figure-html/unnamed-chunk-22-2.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#what-is-credit-scoring">What is Credit Scoring?</a><ul class="nav nav-pills nav-stacked">
<li><a href="#context">Context</a></li>
      <li><a href="#formulation">Formulation</a></li>
      <li><a href="#conceptual-problems-of-current-approaches-to-credit-scoring">Conceptual problems of current approaches to Credit Scoring</a></li>
      <li><a href="#problems-tackled-in-this-package">Problems tackled in this package</a></li>
      </ul>
</li>
      <li>
<a href="#reject-inference">Reject Inference</a><ul class="nav nav-pills nav-stacked">
<li><a href="#context-1">Context</a></li>
      <li><a href="#theoretical-findings">Theoretical findings</a></li>
      <li><a href="#reject-inference-methods">Reject Inference methods</a></li>
      </ul>
</li>
      <li>
<a href="#quantization">Quantization</a><ul class="nav nav-pills nav-stacked">
<li><a href="#context-2">Context</a></li>
      <li><a href="#mathematical-reinterpretation">Mathematical reinterpretation</a></li>
      <li><a href="#existing-methods">Existing methods</a></li>
      <li><a href="#added-constraints">Added constraints</a></li>
      <li><a href="#proposed-method">Proposed method</a></li>
      <li><a href="#figures">Figures</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Adrien Ehrhardt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
